{
  "version": 3,
  "sources": [
    "routes.js"
  ],
  "names": [
    "path",
    "require",
    "directory",
    "__dirname",
    "folder",
    "split",
    "length",
    "arr",
    "BooksHandler",
    "process",
    "cwd",
    "module",
    "exports",
    "app",
    "passport",
    "booksHandler",
    "get",
    "req",
    "res",
    "render",
    "message",
    "flash",
    "post",
    "authenticate",
    "successRedirect",
    "failureRedirect",
    "failureFlash",
    "isLoggedIn",
    "user",
    "route",
    "username",
    "local",
    "city",
    "state",
    "country",
    "page",
    "updateOneUser",
    "getMyBooks",
    "getUserBooks",
    "filteredSearch",
    "updateTwoUsers",
    "logout",
    "redirect",
    "next",
    "isAuthenticated"
  ],
  "mappings": "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",
  "file": "routes.js",
  "sourceRoot": "../../src/app",
  "sourcesContent": [
    "var path = require('path')\r\nvar directory = __dirname\r\nvar folder\r\nif (directory.split('\\\\').length > 1) {//indicates address is split by back slashes (windows environment)\r\n  var arr = directory.split('\\\\')\r\n  folder = arr[arr.length - 2]\r\n} else {//indicates address is split by forward slashes (linux environment)\r\n  var arr = directory.split('/')\r\n  folder = arr[arr.length - 2]\r\n}\r\n\r\nvar BooksHandler = require(process.cwd() + '/' + folder + \"/app/controllers/booksHandler.server.js\")\r\n\r\nmodule.exports = function(app, passport) {\r\n  var booksHandler = new BooksHandler()\r\n\r\n  app.get('/', function(req, res) {\r\n    res.render('index.ejs')\r\n  })\r\n\r\n  app.get('/login', function(req, res) {\r\n    res.render('login.ejs', { message: req.flash('loginMessage') })\r\n  })\r\n\r\n  app.post('/login', passport.authenticate('local-login', {\r\n    successRedirect : '/myBooks',\r\n    failureRedirect : '/login',\r\n    failureFlash : true\r\n  }))\r\n\r\n  app.get('/signup', function(req, res) {\r\n    res.render('signup.ejs', { message: req.flash('signupMessage') })\r\n  })\r\n\r\n  app.post('/signup', passport.authenticate('local-signup', {\r\n    successRedirect : '/myBooks',\r\n    failureRedirect : '/signup',\r\n    failureFlash : true\r\n  }))\r\n\r\n  app.get('/profile', isLoggedIn, function(req, res) {\r\n    res.render('profile.ejs', { user : req.user })\r\n  })\r\n\r\n  app.route('/settings')\r\n    .get(isLoggedIn, function(req, res) {\r\n      res.render('settings.ejs', {\r\n        user : req.user,\r\n        message: req.flash('settingsMessage')\r\n      })\r\n    })\r\n    .post(isLoggedIn, passport.authenticate('details-update', {\r\n      successRedirect : '/profile',\r\n      failureRedirect : '/settings',\r\n      failureFlash : true\r\n    }))\r\n\r\n  app.get('/password', isLoggedIn, function(req, res) {\r\n    res.render('password.ejs', {\r\n      user : req.user,\r\n      message: req.flash('passwordMessage')\r\n    })\r\n  })\r\n\r\n  app.post('/password', isLoggedIn, passport.authenticate('password-update', {\r\n    successRedirect : '/profile',\r\n    failureRedirect : '/password',\r\n    failureFlash : true\r\n  }))\r\n\r\n  app.get('/myBooks', isLoggedIn, function(req, res) {\r\n    res.render('books.ejs', {\r\n      username : req.user.local.username,\r\n      city: req.user.local.city,\r\n      state: req.user.local.state,\r\n      country: req.user.local.country,\r\n      page : 'myBooks'\r\n    })\r\n  })\r\n\r\n  app.get('/searchBooks', isLoggedIn, function(req, res) {\r\n    res.render('books.ejs', {\r\n      username : req.user.local.username,\r\n      city: req.user.local.city,\r\n      state: req.user.local.state,\r\n      country: req.user.local.country,\r\n      page : 'searchBooks'\r\n    })\r\n  })\r\n\r\n  app.get('/myRequestsAndBorrowings', isLoggedIn, function(req, res) {\r\n    res.render('books.ejs', {\r\n      username : req.user.local.username,\r\n      city: req.user.local.city,\r\n      state: req.user.local.state,\r\n      country: req.user.local.country,\r\n      page : 'myRequestsAndBorrowings'\r\n    })\r\n  })\r\n\r\n  app.route('/api/updateOneUser')\r\n    .post(isLoggedIn, booksHandler.updateOneUser)\r\n\r\n  app.route('/api/getMyBooks')\r\n    .get(isLoggedIn, booksHandler.getMyBooks)\r\n\r\n  app.route('/api/getUserBooks')\r\n    .post(isLoggedIn, booksHandler.getUserBooks)\r\n\r\n  app.route('/api/filteredSearch')\r\n    .post(isLoggedIn, booksHandler.filteredSearch)\r\n\r\n  app.route('/api/updateTwoUsers')\r\n    .post(isLoggedIn, booksHandler.updateTwoUsers)\r\n\r\n  app.get('/logout', function(req, res) {\r\n    req.logout()\r\n    res.redirect('/')\r\n  })\r\n}\r\n\r\nfunction isLoggedIn(req, res, next) {\r\n  if (req.isAuthenticated()) return next()\r\n  res.redirect('/')\r\n}\r\n"
  ]
}
